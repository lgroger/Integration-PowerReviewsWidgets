require(["modules/jquery-mozu","underscore","hyprlive","modules/api","modules/backbone-mozu","modules/cart-monitor","modules/models-product","modules/views-productimages","modules/soft-cart","modules/added-to-cart","modules/powerreviews","vendor/wishlist","hyprlivecontext","pages/dndengine"],function(t,e,o,a,i,r,d,n,s,l,u,c,p,m){function h(e){if(e.length>0){for(var o="",i=0;i<e.length;i++)o+=i>0?" or productCode eq "+e[i]:"productCode eq "+e[i];a.get("products",{filter:o}).then(function(e){if(e.length>0)for(var o=0;o<e.length;o++){var a=new d.Product(e[o].data),i=x(a,w.unitOfMeasure);null===i&&(i="");var r=i;t('[productcode="'+a.get("productCode")+'"]').find(".uom").html(r).show();var n=x(a,w.dndCode);n&&(window.personalizeBundleProducts.push(a),P=1)}g(C)})}else g(C)}function g(e){C.length>0?a.get("product",{productCode:e[y]}).then(function(o){console.log(o);var a=new d.Product(o.data),i=a.get("content.productImages");i.length>0&&t('[productcode="'+e[y]+'"]').find(".block-img-sec").html('<img class="bundle-img" src="'+i[0].imageUrl+'"/>');var r=x(a,w.unitOfMeasure);null===r&&(r="");var n=r;t('[productcode="'+e[y]+'"]').find(".uom").html(n).show();var s=x(a,w.dndCode);s&&(window.personalizeBundleProducts.push(a),P=1),y++,y<e.length?g(e):(P?(t(".addToCart").html("Personalize").addClass("personalize").removeAttr("id"),z&&t(".addToCart").attr("disabled",!1).removeClass("is-disabled")):(t(".addToCart").attr("disabled",!0).removeClass("is-disabled"),z&&t(".addToCart").attr("disabled",!1).removeClass("is-disabled")),window.removePageLoader())}):(P?(t(".addToCart").html("Personalize").addClass("personalize").removeAttr("id"),z&&t(".addToCart").attr("disabled",!1).removeClass("is-disabled")):z&&t(".addToCart").attr("disabled",!1).removeClass("is-disabled"),window.removePageLoader())}function v(){t(".trigger-login").trigger("click"),t("#cboxOverlay").show(),t("#mz-quick-view-container").fadeOut(350),t("#mz-quick-view-container").empty()}o.engine.setFilter("contains",function(t,e){return t.indexOf(e)>-1});var f=o.getThemeSetting("bannerProductTypes"),b=f.split(","),y=0,w=o.getThemeSetting("productAttributes");window.personalizeBundleProducts=[],window.extrasProducts=[];var z,C=[],T=[],P=0,x=function(t,e){for(var o=null,a=t.get("properties")?t.get("properties"):t.properties,i=0;i<a.length;i++)if(a[i].attributeFQN.toLowerCase()===e.toLowerCase()){for(var r=0;r<a[i].values.length;r++)o=a[i].values[r].value;break}return o},k=function(t,e){for(var o=null,a=t.properties,i=0;i<a.length;i++)if(a[i].attributeFQN.toLowerCase()===e.toLowerCase()){for(var r=0;r<a[i].values.length;r++)o=a[i].values[r].value;break}return o},q=function(e){e.on("error",function(){t(".dnd-popup").remove(),t("body").css({overflow:"auto"}),t("html").removeClass("dnd-active-noscroll"),t("#cboxOverlay").hide()}),e.on("addedtocart",function(a,i){t('.product-quantity input[data-mz-value="quantity"]').val();if(a&&a.prop("id")){var n=new d.Product(a.data);e.isLoading(!0),t(".dnd-popup").remove(),t("body").css({overflow:"auto"}),t("html").removeClass("dnd-active-noscroll"),t("#cboxOverlay").hide(),r.addToCount(e.get("quantity")),s.update(),e.isLoading(!1),n.set("quantity",i.get("quantity")),l.proFunction(n)}else e.trigger("error",{message:o.getLabel("unexpectedError")})}),e.on("addedtowishlist",function(){t("#add-to-wishlist").prop("disabled","disabled").text(o.getLabel("addedToWishlist")),t(".dnd-popup").remove(),t("body").css({overflow:"auto"}),t("html").removeClass("dnd-active-noscroll"),t("#cboxOverlay").hide(),window.location.href=location.href});{var a=new O({el:t("#product-detail"),model:e,messagesEl:t("[data-mz-message-bar]")});new n.ProductPageImagesView({el:t("[data-mz-productimages]"),model:e})}window.productView=a,a.render();var i=new Q({el:t("#mz-pdp-floating-header"),model:e});i.render()},N=function(e){var o=a;o.on("success",function(e,o){try{var a=o.getResponseHeader("productExtras");if(a&&""!==a){var i=JSON.parse(a);if(i.length>0)for(var r=0;r<i.length;r++){var d=k(i[r],w.dndCode);d&&t(".addToCart").html("Personalize").addClass("personalize").removeAttr("id").attr("disabled",!0),window.extrasProducts.push(i[r])}}}catch(n){console.log(n)}}),o.request("get","/api/commerce/catalog/storefront/products/"+e.get("productCode")+"?my=1").then(function(t){var e=new d.Product(t);q(e)})},Q=i.MozuView.extend({templateName:"modules/product/fixed-product-header",autoUpdate:["quantity"],initialize:function(){this.on("render",this.afterRender)},additionalEvents:{"change [data-mz-product-option]":"onOptionChange","blur [data-mz-product-option]":"onOptionChange","click #flt-add-to-cart":"addToCart","click .personalize":"personalizeProduct","change [data-mz-value='quantity']":"onQuantityChange","click .qtyplus":"increaseQty","click .qtyminus":"decreaseQty"},increaseQty:function(e){t(".mz-productdetail-addtocart").prop("disabled",!0);var o=t(e.currentTarget).parent().find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10);isNaN(a)?(a=1,o.val(1)):(a+=1,o.val(a)),a>9999&&(a=9999,o.val(9999)),this.model.set("quantity",a),isNaN(a)||this.model.updateQuantity(a),setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3)},decreaseQty:function(e){t(".mz-productdetail-addtocart").prop("disabled",!0);var o=t(e.currentTarget).parent().find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10);!isNaN(a)&&a>1?(a-=1,o.val(a)):(a=1,o.val(1)),this.model.set("quantity",a),isNaN(a)||this.model.updateQuantity(a),a>=this.model._minQty&&setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3)},onQuantityChange:e.debounce(function(e){t(".mz-productdetail-addtocart").prop("disabled",!0);var o=t(e.currentTarget),a=parseInt(o.val(),10);0===a&&(a=1,o.val(1)),this.model.set("quantity",a),this.model.set("newQuantity",a),isNaN(a)||this.model.updateQuantity(a),a>=this.model._minQty&&setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3)},500),addToCart:function(){var e=this,o=t(e.el).find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10),i="",r=this.model.attributes.variationProductCode;this.model.set("quantity",a),this.model.addToCart(),void 0!==r&&"undefined"!==r&&(i=r),"undefined"!==BrTrk&&void 0!==BrTrk&&BrTrk.getTracker().logEvent("cart","click-add",{prod_id:this.model.attributes.productCode,sku:i})},addToWishlist:function(){require.mozuData("user").isAnonymous?v():c.initoWishlist(this.model)},personalizeProduct:function(){window.productView.personalizeProduct()},changeQty:function(e){var o=t(e.currentTarget),a=parseInt(o.val(),10);this.model.updateQuantity(a)},afterRender:function(){}}),O=i.MozuView.extend({templateName:"modules/product/product-detail-custom",autoUpdate:["quantity"],additionalEvents:{"change [data-mz-product-option]":"onOptionChange","click button#add-to-cart":"addToCart","click .personalize":"personalizeProduct","change [data-mz-value='quantity']":"onQuantityChange","change .mz-productlable-options":"showOptionsList","change .needslits":"configureSlitOption","click .qtyplus":"increaseQty","click .qtyminus":"decreaseQty"},increaseQty:function(e){t(".mz-productdetail-addtocart").prop("disabled",!0);var o=t(e.currentTarget).parent().find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10);isNaN(a)?(a=1,o.val(1)):(a+=1,o.val(a)),a>9999&&(a=9999,o.val(9999)),this.model.set("quantity",a),isNaN(a)||this.model.updateQuantity(a),setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3)},decreaseQty:function(e){var o=t(e.currentTarget).parent().find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10);if(!isNaN(a)&&a>1){if(a-=1,a<this.model._minQty)return!1;o.val(a)}else a=1,o.val(1);t(".mz-productdetail-addtocart").prop("disabled",!0),this.model.set("quantity",a),isNaN(a)||this.model.updateQuantity(a),a>=this.model._minQty?setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3):o.next().html("Minimum required quantity for purchase is "+this.model._minQty)},onQuantityChange:e.debounce(function(e){t(".mz-productdetail-addtocart").prop("disabled",!0);var o=t(e.currentTarget),a=parseInt(o.val(),10);(0===a||a<this.model._minQty)&&(a=this.model._minQty,o.val(a)),this.model.set("quantity",a),this.model.set("newQuantity",a),isNaN(a)||this.model.updateQuantity(a),a>=this.model._minQty&&setTimeout(function(){t(".mz-productdetail-addtocart").prop("disabled",!1)},1e3)},500),showOptionsList:function(o){t(".mz-productdetail-addtocart").prop("disabled",!0);var a=t(o.currentTarget),i=a.val(),r=this,d=r.model.getConfiguredOptions();r.model.set("OptionSelectedID",i),d.length>0&&e.each(d,function(t){r.model.get("options").get(t.attributeFQN).unset("value")}),t("select.mz-productoptions-option").hide(),t('[data-mz-product-option="'+i+'"]').show()},personalizeProduct:function(e){var a=t(e.currentTarget).parent().parent().find('[data-mz-value="quantity"]'),i=parseInt(a.val(),10);if(0>=i)return t('[data-mz-validationmessage-for="quantity"]').html("Please enter a product quantity above 0"),!1;if(i<this.model._minQty)return t('[data-mz-validationmessage-for="quantity"]').html("Quantity should be more than minimum quantity"),!1;var r=this,d=o.getThemeSetting("dndEngineUrl"),n=new m.DNDEngine(r.model,d);n.initialize(),n.send()},render:function(){var a,i=this,r=i.model.getConfiguredOptions(),d=t("[option-alternate-name]");if(t.each(d,function(e,o){var a=t(o).attr("option-alternate-name"),r=i.model.get("options").get(a),d=r.get("values");for(var n in d){var s=t.trim(t(o).find('[productCode="'+d[n].value+'"]').text());""!==s&&(d[n].stringValue=s)}}),b.indexOf(i.model.get("productType"))>-1){var n=i.model.get("options").get(w.outdoorbanner),s=i.model.get("options").get(w.outdoorbannerslits);n&&n.get("value")||s&&s.get("value")?i.model.set("enableSlitoption",!0):i.model.set("enableSlitoption",!1);var l=i.model.toJSON();0===r.length&&l.priceRange&&(i.model.apiModel.data=l,i.model.apiModel.data.hasPriceRange=!0,i.model.set("hasPriceRange",!0),i.model._hasPriceRange=!0)}window.personalizeBundleProducts.length>0&&i.model.set("enablePersonalise",!0),i.model.set("isConfigure",!1),"Configurable"===i.model.get("productUsage")&&r.length>0&&(a=e.where(i.model.get("options").toJSON(),{isRequired:!0}),r.length===a.length&&i.model.set("isConfigure",!0)),this.hideExtras();var u=i.getSelectedExtrasInfo(r);u&&i.model.set("extrasProductInfo",u),this.renderConfigure(),this.$("[data-mz-is-datepicker]").each(function(a,r){t(r).dateinput().css("color",o.getThemeSetting("textColor")).on("change  blur",e.bind(i.onOptionChange,i))})},getExtraProduct:function(t){var e=null;if(window.extrasProducts.length>0)for(var o=0;o<window.extrasProducts.length;o++)if(window.extrasProducts[o].productCode===t){e=window.extrasProducts[o];break}return e},getSelectedExtrasInfo:function(){var t=[],e=this,o=e.model.get("options");if(o.length>0)for(var a=0;a<o.models.length;a++){var i=o.models[a];if("Extra"===i.get("attributeDetail").usageType&&"ProductCode"===i.get("attributeDetail").dataType&&"hide"===i.get("isHideExtra")){var r={};r.name=i.get("attributeDetail").name,r.isRequired=i.get("isRequired"),r.attributeCode=i.get("attributeFQN").split("~")[1],r.values=[];for(var d=i.get("values"),n=0;n<d.length;n++){var s={},l=e.getExtraProduct(d[n].value);s.price=d[n].deltaPrice,s.name=d[n].stringValue,s.value=d[n].value,l&&(s.mfgPartNumber=l.mfgPartNumber);var u=d[n].bundledProduct.inventoryInfo;u&&u.manageStock&&(s.maxQty=u.onlineStockAvailable),s.quantity=d[n].bundledProduct.quantity,r.values.push(s)}t.push(r)}}return t},getExtraTitle:function(t){var e=null;if(window.extrasProducts.length>0)for(var o=0;o<window.extrasProducts.length;o++)if(window.extrasProducts[o].productCode===t){e=window.extrasProducts[o].optionTitle;break}return e},setOptionTitle:function(){var t=this,e=t.model.get("options");if(e&&e.length>0)for(var o=0;o<e.models.length;o++){var a=e.models[o];if("Extra"===a.get("attributeDetail").usageType&&"ProductCode"===a.get("attributeDetail").dataType)for(var i=0;i<a.get("values").length;i++)t.getExtraTitle(a.get("values")[i].value)&&(a.get("values")[i].stringValue=t.getExtraTitle(a.get("values")[i].value))}},hideExtras:function(){var t=this,e=t.model.get("options"),o=x(t.model,"tenant~extrastohide"),a=[];o&&""!==o&&(a=o.toLowerCase().split(","));for(var i=0;i<e.length;i++){e.models[i].set("isHideExtra","show");var r=e.models[i].get("attributeFQN").split("~");a.indexOf(r[1])>-1&&(e.models[i].set("isHideExtra","hide"),t.model.set("purchasableState.isPurchasable",!0))}},renderConfigure:function(){var t,e,o,r,n,s=this,l=s.model.getConfiguredOptions();s.setOptionTitle(),s.model.set("minQty",s.model._minQty),l.length>0?(t=l[0].attributeFQN,e=l[0].value,o=s.model.get("options").get(t),"Configurable"!==s.model.get("productType")&&"Extra"===o.get("attributeDetail").usageType&&"ProductCode"===o.get("attributeDetail").dataType?a.get("product",{productCode:e}).then(function(t){var e=new d.Product(t.data),o=x(e,w.unitOfMeasure);o&&s.model.set("uom",o);var a=x(e,w.productionTime);a&&s.model.set("productionTime",a);var l=e.get("inventoryInfo");if(l.manageStock&&s.model.set("inventoryInfo",l),r=x(s.model,w.dndCode),r&&""!==r)n=s.model.get("mfgPartNumber"),(null===n||void 0===n||""===n)&&e.get("mfgPartNumber")&&""!==e.get("mfgPartNumber")&&s.model.set("mfgPartNumber",t.data.mfgPartNumber);else{e.get("mfgPartNumber")&&""!==e.get("mfgPartNumber")&&s.model.set("mfgPartNumber",t.data.mfgPartNumber),r=x(e,w.dndCode);var u=x(e,w.designCode);r&&(s.model.set("enablePersonalise",!0),s.model.set("dndCode",r),s.model.set("designCode",u))}i.MozuView.prototype.render.apply(s)}):i.MozuView.prototype.render.apply(s)):i.MozuView.prototype.render.apply(this)},onOptionChange:function(e){return this.configure(t(e.currentTarget))},configure:function(o){t(".mz-productdetail-addtocart").prop("disabled",!0);var a=this;a.model.set("mfgPartNumber","");var i,r=o.val(),d=o.data("mz-product-option"),n=o[0],s="checkbox"!==n.type&&"radio"!==n.type||n.checked,l=this.model.get("options").get(d),u=a.model.getConfiguredOptions();b.indexOf(a.model.get("productType"))>-1&&e.each(u,function(t){a.model.get("options").get(t.attributeFQN).unset("value")}),"tenant~cdyper-choice"===d&&"cdyperw-option"===r.toLowerCase()&&e.each(u,function(t){a.model.get("options").get(t.attributeFQN).unset("value")}),l&&("YesNo"===l.get("attributeDetail").inputType?l.set("value",s):s&&(i=l.get("value"),i===r||void 0===i&&""===r?t(".mz-productdetail-addtocart").prop("disabled",!1):l.set("value",r)))},configureSlitOption:function(o){var a,i="",r=this,d=t(o.currentTarget).is(":checked")?w.outdoorbanner:w.outdoorbannerslits,n=this,s=this.model.get("options").get(d);r.model.set("mfgPartNumber","");var l=n.model.getConfiguredOptions();a=s.get("value"),e.each(l,function(t){n.model.get("options").get(t.attributeFQN).unset("value")}),t(o.currentTarget).is(":checked")?(s=this.model.get("options").get(w.outdoorbannerslits),s&&(i=a+"S",console.log(i),a===i||void 0===a&&""===i||s.set("value",i))):(s=this.model.get("options").get(w.outdoorbanner),s&&(i=a.split("S")[0],console.log(i),a===i||void 0===a&&""===i||s.set("value",i)))},addToCart:function(){var e=this,o=t(e.el).find('[data-mz-value="quantity"]'),a=parseInt(o.val(),10),i="";void 0!==this.model.attributes.variationProductCode&&"undefined"!==this.model.attributes.variationProductCode&&(i=this.model.attributes.variationProductCode),"undefined"!==BrTrk&&void 0!==BrTrk&&BrTrk.getTracker().logEvent("cart","click-add",{prod_id:this.model.attributes.productCode,sku:i}),this.model.set("quantity",a),this.model.addToCart()},addToWishlist:function(){var e=this;if(require.mozuData("user").isAnonymous){var o={};o.productCode=this.model.get("productCode");var a=e.model.getConfiguredOptions();o.options=a,t.cookie("wishlistprouct","direct",{path:"/"});var i=t("#homepageapicontext");i.contents().find("#data-mz-preload-apicontext").html()?(this.model.set("moveToWishList",1),c.initoWishlist(this.model)):v()}else this.model.set("moveToWishList",1),c.initoWishlist(this.model)},addToWishlistWithDesgin:function(){var e=this;if(this.model.on("addedtowishlist",function(){t("#add-to-wishlist").prop("disabled","disabled").text(o.getLabel("addedToWishlist")),t(".dnd-popup").remove(),t("body").css({overflow:"auto"}),t("html").removeClass("dnd-active-noscroll"),t("#cboxOverlay").hide(),window.location.href=location.href}),require.mozuData("user").isAnonymous){var a={};a.productCode=this.model.get("productCode");var i=e.model.getConfiguredOptions();a.options=i,t.cookie("wishlistprouct",JSON.stringify(a),{path:"/"});var r=t("#homepageapicontext");r.contents().find("#data-mz-preload-apicontext").html()?c.initoWishlistPersonalize(this.model):(v(),t(".popoverLoginForm .popover-wrap").css({border:"1px solid #000"}))}else c.initoWishlistPersonalize(this.model)},addToWishlistAfterLogin:function(){c.initoWishlist(this.model),t.cookie("wishlistprouct","",{path:"/"})},addToWishlistAfterLoginPersonalize:function(){c.initoWishlistPersonalize(this.model),t.cookie("wishlistprouct","",{path:"/"})},setSelectedOptions:function(){var o=this,a=t.cookie("wishlistprouct");if(a&&""!==a){var i=JSON.parse(a),r=i.options;r&&e.each(r,function(t){var e=t.value?t.value:t.shopperEnteredValue;o.model.get("options").get(t.attributeFQN).set("value",e)}),setTimeout(function(){t.cookie("wishlistprouct","",{path:"/"}),o.addToWishlist()},500)}},checkLocalStores:function(e){var o=this;e.preventDefault(),this.model.whenReady(function(){var a=t(e.currentTarget).parents("[data-mz-localstoresform]"),i=a.find("[data-mz-localstoresform-input]");i.length>0&&(i.val(JSON.stringify(o.model.toJSON())),a[0].submit())})},setOptionValues:function(t){var e=this,o=this.model.get("options"),a=null,i={};if(t.extras){a=JSON.parse(t.extras);for(var r=0;r<a.length;r++)i["tenant~"+a[r].attributeCode]=a[r].value}var d={};d.options=[];for(var n=0;n<o.length;n++)o.models[n].get("attributeFQN")===w.dndToken&&(o.models[n].set("value",t.projectToken),o.models[n].set("shopperEnteredValue",t.projectToken)),Object.keys(i).length>0&&i[o.models[n].get("attributeFQN").toLowerCase()]&&(o.models[n].set("value",i[o.models[n].get("attributeFQN").toLowerCase()]),o.models[n].set("shopperEnteredValue",i[o.models[n].get("attributeFQN").toLowerCase()]));e.model.set("options",o)},addToCartAfterPersonalize:function(t){var e=this;e.setOptionValues(t),t.quantity&&e.model.set("quantity",t.quantity),e.model.addToCart(),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","shindigz","buy","addtocart"]);var o=(this.model.attributes.productUsage,this.model.attributes.variationProductCode),a="";"undefined"!==o&&void 0!==o&&(a=o),"undefined"!==BrTrk&&void 0!==BrTrk&&BrTrk.getTracker().logEvent("cart","click-add",{prod_id:this.model.attributes.productCode,sku:a})},AddToWishlistAfterPersonalize:function(t){var e=this;e.setOptionValues(t),t.quantity&&e.model.set("quantity",t.quantity),e.addToWishlistWithDesgin()},afterRender:function(){var o=this,a=t('[data-mz-product-option="'+w.giantGreetingCardSize+'"]').val();console.log(a),""!==a&&t('[data-mz-product-option="'+w.optionalEnvelope+'"]').find("option").each(function(){var e=t(this).attr("value").split("_");e.length>1&&e[0]!==a&&"no"!==e[0].toLowerCase()&&t(this).remove()});var i=t(".mz-productdetail-notpurchasable").text().trim();if(i&&""!==i&&t(".mz-productdetail-addtocart").attr("data-tooltip",i),b.indexOf(o.model.get("productType"))>-1){t(".addToCart").attr("data-tooltip","Please select an option"),i&&""!==i&&t(".mz-productdetail-addtocart").attr("data-tooltip",i),o.model.get("OptionSelectedID")&&""!==o.model.get("OptionSelectedID")&&(t("select[mz-banner-type]").val(o.model.get("OptionSelectedID")),t("select.mz-productoptions-option").hide(),t('[data-mz-product-option="'+o.model.get("OptionSelectedID")+'"]').show());var r=o.model.getConfiguredOptions(),d=null;e.each(r,function(e){if(d=o.model.get("options").get(e.attributeFQN).get("value"),d&&("tenant~outdoor-banner"===e.attributeFQN.toLowerCase()||"tenant~outdoor-banner-with-slits"===e.attributeFQN.toLowerCase()))if(t("[mz-banner-type]").val(w.outdoorbanner),t('[data-mz-product-option="'+w.outdoorbanner+'"]').show(),-1!==d.indexOf("S")){var a=d.split("S");t('[data-mz-product-option="'+w.outdoorbanner+'"]').val(a[0]),t(".needslits").prop("checked",!0)}else t('[data-mz-product-option="'+w.outdoorbanner+'"]').val(d)}),void 0!==t(".mz-productoptions-option:visible").val()&&""!==t(".mz-productoptions-option:visible").val()?(t(".personalize").prop("disabled",!1),t(".custom-qty input").prop("disabled",!1)):(t(".personalize").prop("disabled",!0),t(".custom-qty input").prop("disabled",!0))}if("Extra"===this.$("[data-mz-product-option]").attr("usageType")&&1===this.$("[data-mz-product-option]").length&&2==this.$("[data-mz-product-option]").find("option").length&&this.$("[data-mz-product-option]").parents(".mz-productdetail-options").hide(),"CandyBar"===o.model.get("productType")){var n=t('[data-mz-product-option="tenant~cdyper-choice"]').val();void 0!==n&&"cdyperw-option"==n.toLowerCase()&&t('[data-mz-product-option="tenant~pcdypcb"]').closest(".mz-productoptions-optioncontainer").hide(),void 0!==n&&"cdyperw-option"!==n.toLowerCase()&&(o.model.get("purchasableState").isPurchasable&&void 0!==t(".mz-productoptions-option:visible:eq(1)").val()&&""!==t(".mz-productoptions-option:visible:eq(1)").val()?(t(".personalize").prop("disabled",!1),t(".custom-qty input").prop("disabled",!1)):(t(".personalize").prop("disabled",!0),t(".custom-qty input").prop("disabled",!0)))}t(".product-image-slider .owl-carousel").length>0&&(setTimeout(function(){t(".product-image-slider .owl-next, .product-image-slider .owl-prev").html(""),t(".product-image-slider .owl-carousel").owlCarousel({dots:!0,loop:!0,nav:!0,responsive:{0:{items:2},800:{items:3},1e3:{items:4}},margin:10,items:4}).owlCarousel("refresh"),t(".product-image-slider .owl-carousel .owl-item").length<4&&(t(".product-image-slider .owl-prev").hide(),t(".product-image-slider .owl-next").hide()),t(".product-video .owl-next, .product-video .owl-prev").html(""),t(".product-video .owl-carousel").owlCarousel({dots:!1,loop:!1,nav:!0,items:1}).owlCarousel("refresh"),t(".product-video .owl-carousel .owl-item").length<2&&t(".product-video .owl-next, .product-video .owl-prev").hide()},50),t(".product-image-slider").on("click",".item",function(){var e=t(this).find("img").attr("data-image-url");e=-1!==e.indexOf("?")?e+"&max=600":"?max=600",t(".product-image > img").attr("src",e),t(".product-image > img").show(),t("#video-frame").hide(),t(".product-image > iframe").attr("src","")})),t("div[video-data] > img").click(function(){t(this).parent().attr("video-data")&&(t(".product-image > img").hide(),t(".product-image > iframe").attr("src","http://www.youtube.com/embed/"+t(this).parent().attr("video-data")).show())}),t("#video-frame").hide(),u.writeProductListBoxes(),t(".custom-qty").children(".qtyminus,.qtyplus").css({"background-color":"transparent","fonts-size":"1rem"}),t("#addThis-conainer").attr("data-url",window.location.origin+t("#addThis-conainer").attr("data-url"))},initialize:function(){var e=this;this.on("render",this.afterRender);var o=this.model.get("options");if(this.model.set("minQty",this.model._minQty),o.length>2)this.$("[data-mz-product-option]").each(function(){var o,a,i=t(this);if(i.val())switch(i.attr("type")){case"checkbox":case"radio":o=i.prop("checked"),a=!!i.attr("checked"),(o&&!a||a&&!o)&&e.configure(i);break;default:e.configure(i)}});else for(var a=o.models,i=0;i<a.length;i++)"Extra"===a[i].get("attributeDetail").usageType&&"Tenant~dnd-token"!==a[i].get("attributeFQN")&&1===a[i].get("values").length&&a[i].set("value",a[i].get("values")[0].value)}});t(document).ready(function(){var e=t(".mz-productdetail-notpurchasable").text().trim();t(".mz-productdetail-addtocart").attr("data-tooltip",e);var o=d.Product.fromCurrent();z=o.get("purchasableState").isPurchasable;var a=t(".bundle-block").find("[productcode]");a.each(function(){0===t(this).find('input[name="productUsage"]').length?C.push(t(this).attr("productCode")):T.push(t(this).attr("productCode"))}),console.log(C),(T.length>0||C.length>0)&&(window.showPageLoader(),h(T)),N(o);var i=t("#tab-content4 .mz-cms-content").html();t(".shipping-content").html(i),t(".bundle-comp-pdp-section .show-cmp-bundle").click(function(){return t(this).toggleClass("active"),t(this).hasClass("active")?t(this).find("span").text("Hide Components"):t(this).find("span").text("Show Components"),t(".bundle-comp-pdp-section .bundle-block").slideToggle(),!1}),t(document).on("click",'[data-pr-event="snippet-read-reviews"]',function(){return t("#tab2").prop("checked",!0),t("html, body").animate({scrollTop:t("#mz-drop-zone-why-shop-wdgt").offset().top},1e3),!1})})}),define("pages/product",function(){});