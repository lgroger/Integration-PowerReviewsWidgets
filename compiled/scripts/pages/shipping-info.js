require(["modules/jquery-mozu","hyprlive","modules/backbone-mozu","modules/api"],function(e,i,t,o){function n(e){var i=[];console.log(e),o.request("GET","/api/content/documentlists/shippingList@shindigz/views/shippingView/documents?pageSize=100&filter=properties.country_code eq "+e+" and (properties.shipping_code eq 1 or properties.shipping_code eq 4 or properties.shipping_code eq 6 or properties.shipping_code eq 7 or properties.shipping_code eq 8 or properties.shipping_code eq 9)").then(function(t){for(var o=0;o<t.items.length;o++)i.push({min_amount:t.items[o].properties.min_amount,max_amount:t.items[o].properties.max_amount,std:t.items[o].properties.shipping_charges});console.log("Array "),p(i,e)},function(e){console.log(e)})}function p(e,i){o.request("GET","/api/content/documentlists/shippingList@shindigz/views/shippingView/documents?pageSize=100&filter=properties.country_code eq "+i+" and (properties.shipping_code eq 2 or properties.shipping_code eq 5)").then(function(t){console.log("2nd day");for(var o=0;o<t.items.length;o++)for(var n=0;n<e.length;n++)e[n].min_amount==t.items[o].properties.min_amount&&(e[n].days2=t.items[o].properties.shipping_charges);s(e,i)},function(e){console.log(e)})}function s(e,i){o.request("GET","/api/content/documentlists/shippingList@shindigz/views/shippingView/documents?pageSize=100&filter=properties.country_code eq "+i+" and (properties.shipping_code eq 3)").then(function(t){console.log("next day");for(var o=0;o<t.items.length;o++)for(var n=0;n<e.length;n++)e[n].min_amount==t.items[o].properties.min_amount&&(e[n].nextday=t.items[o].properties.shipping_charges);console.log("Array final "+e.length),r(e,i)},function(e){console.log("error "),console.log(e)})}function r(i,t){var o="",n=!1,p=!1;console.log(i),i.sort(function(e,i){return parseFloat(e.min_amount)-parseFloat(i.min_amount)});for(var s=0;s<i.length;s++)o+="<tr>",o+="<td>$"+i[s].min_amount+" - $"+i[s].max_amount+"</td>",o+="<td>$"+i[s].std+"</td>",void 0===i[s].days2?o+="<td>  </td>":(o+="<td>$"+i[s].days2+"</td>",n=!0),void 0===i[s].nextday?o+="<td>  </td>":(o+="<td>$"+i[s].nextday+"</td>",p=!0),o+="</tr>";o+="<tr><td></td><td></td><td></td><td></td></tr>",d(t,n,p),console.log("Table Data in html"),console.log(o),e(".shipping-info-display tbody").html(o)}function d(i,t,n){var p="",s="",r="",d="";o.request("GET","/api/content/documentlists/shippingMoreThenList@shindigz/views/shippingMoreThenView/documents?pageSize=100&filter=properties.country_code eq "+i+" and (properties.shipping_code eq 1 or properties.shipping_code eq 4 or properties.shipping_code eq 6 or properties.shipping_code eq 7 or properties.shipping_code eq 8 or properties.shipping_code eq 9)").then(function(i){for(var t=0;t<i.items.length;t++)s+="$"+i.items[t].properties.more_then+" and above each $"+Math.ceil(i.items[t].properties.for_each)+" add",(1==i.items[t].properties.shipping_code||4==i.items[t].properties.shipping_code||6==i.items[t].properties.shipping_code||7==i.items[t].properties.shipping_code||8==i.items[t].properties.shipping_code||9==i.items[t].properties.shipping_code)&&(r="$"+i.items[t].properties.amount_to_be_added);e(".shipping-info-display tbody tr:last-child td:nth-child(1)").text(s),e(".shipping-info-display tbody tr:last-child td:nth-child(2)").text(r)},function(e){console.log(e)}),t&&o.request("GET","/api/content/documentlists/shippingMoreThenList@shindigz/views/shippingMoreThenView/documents?pageSize=100&filter=properties.country_code eq "+i+" and (properties.shipping_code eq 2 or properties.shipping_code eq 5)").then(function(i){for(var t=0;t<i.items.length;t++)(2==i.items[t].properties.shipping_code||5==i.items[t].properties.shipping_code)&&(p+="$"+i.items[t].properties.amount_to_be_added);e(".shipping-info-display tbody tr:last-child td:nth-child(3)").text(p)},function(e){console.log(e)}),n&&(console.log("sss"),o.request("GET","/api/content/documentlists/shippingMoreThenList@shindigz/views/shippingMoreThenView/documents?pageSize=100&filter=properties.country_code eq "+i+" and (properties.shipping_code eq 3)").then(function(i){for(var t=0;t<i.items.length;t++)3==i.items[t].properties.shipping_code&&(d+="$"+i.items[t].properties.amount_to_be_added);console.log("fina "+d),e(".shipping-info-display tbody tr:last-child td:nth-child(4)").text(d)},function(e){console.log("error on last"+e)}))}e(function(){var i="usa";e(".shipping-info-display tbody").html("<h3>Loading..</h3>"),e(document).on("change",".shipping-location",function(){var i=e(this).find(":selected").val();e(".shipping-info-display tbody").html("<h3>Loading..</h3>"),n(i)}),n(i)})});