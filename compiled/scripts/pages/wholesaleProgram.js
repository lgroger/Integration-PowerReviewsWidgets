require(["modules/jquery-mozu","hyprlive","modules/backbone-mozu","modules/api"],function(a,t,e,n){a(document).ready(function(){a("#businessType").prop("type","password"),a("#cUSTTYPE").prop("placeholder","Describe your Business"),a("fieldset legend").append('<div class="mktoAsterix1">*&nbsp;&nbsp;&nbsp;</div>'),a('<input id="custStateDupinput" name="custStateDup" maxlength="255" type="text" class="mktoField mktoTextField mktoHasWidth mktoRequired mktoValid" style="width: 150px;display:none;">').insertAfter("#custState"),a('<input id="StateDupinput" name="StateDup" maxlength="255" type="text" class="mktoField mktoTextField mktoHasWidth mktoRequired mktoValid" style="width: 150px;display:none;">').insertAfter("#State");var t={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Aland",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Democratic Republic of the Congo",CF:"Central African Republic",CG:"Republic of the Congo",CH:"Switzerland",CI:"Ivory Coast",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Democratic People's Republic of Korea",KR:"Republic of Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"iechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"RÃ©union",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Ascension and Tristan da Cunha Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"East Timor",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"British Virgin Islands",VI:"U.S. Virgin Islands",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},e={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",AA:"Armed Forces Americas",AE:"Armed Forces Europe",AP:"Armed Forces Pacific",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};if(require.mozuData("user").isAnonymous)a("#custCountry").val(t.US);else{var i=require.mozuData("user").accountId,s="/api/commerce/customer/accounts/"+i;a("#businessType").parent().parent().parent().hide(),n.request("GET",s).then(function(n){if(n.contacts.length>0){a("#FirstName").val(n.contacts[0].firstName),a("#LastName").val(n.contacts[0].lastNameOrSurname),a("#custEmailAddress").val(n.contacts[0].email),a("#BillingStreet").val(n.contacts[0].address.address1),a("#custAddrLine").val(n.contacts[0].address.address2),a("#custCity").val(n.contacts[0].address.cityOrTown),a("#Company").val(n.contacts[0].companyOrOrganization),a("#custPostalCode").val(n.contacts[0].address.postalOrZipCode),n.contacts[0].phoneNumbers.home.length>0?a("#daytimePhoneNumber").val(n.contacts[0].phoneNumbers.home):a("#daytimePhoneNumber").val(n.contacts[0].phoneNumbers.mobile);var i=n.contacts[0].address.countryCode;a("#custCountry").val(t[i]);var s=n.contacts[0].address.stateOrProvince;"US"!==i&&(a("select#custState").attr("name","custStateDup"),a("select#custState").attr("id","custStateDup"),a("select#custStateDup").hide(),a("input#custStateDupinput").attr("name","custState"),a("input#custStateDupinput").attr("id","custState"),a("input#custState").show()),2===s.length?a("#custState").val(e[s]):a("#custState").val(s)}else a("#FirstName").val(n.firstName),a("#LastName").val(n.lastName),"#custEmailAddress".val(n.emailAddress)})}a("#Country").val("USA"),a(document).on("change","#custCountry",function(){var t=a("#custCountry option:selected").val(),e=a("#custCountry option:selected").text();"US"!==t&&"United States"!==e?(a("select#custState").attr("name","custStateDup"),a("select#custState").attr("id","custStateDup"),a("select#custStateDup").hide(),a("input#custStateDupinput").attr("name","custState"),a("input#custStateDupinput").attr("id","custState"),a("input#custState").show()):("US"===t||"United States"===e)&&(a("input#custState").attr("name","custStateDupinput"),a("input#custState").attr("id","custStateDupinput"),a("input#custStateDupinput").hide(),a("select#custStateDup").attr("name","custState"),a("select#custStateDup").attr("id","custState"),a("select#custState").show())}),a(document).on("change","#Country",function(){var t=a("#Country option:selected").val(),e=a("#Country option:selected").text();"US"!==t&&"USA"!==e?(a("select#State").attr("name","StateDup"),a("select#State").attr("id","StateDup"),a("select#StateDup").hide(),a("input#StateDupinput").attr("name","State"),a("input#StateDupinput").attr("id","State"),a("input#State").show()):("US"===t||"USA"===e)&&(a("input#State").attr("name","StateDupinput"),a("input#State").attr("id","StateDupinput"),a("input#StateDupinput").hide(),a("select#StateDup").attr("name","State"),a("select#StateDup").attr("id","State"),a("select#State").show())});var r;a("#mktoForm_1169 .mktoButton").click(function(){var t=a("#custEmailAddress").val(),e=a("#FirstName").val(),i=a("#LastName").val(),s=!1,o=a("#businessType").val(),u={account:{emailAddress:t,userName:t,firstName:e,lastName:i,acceptsMarketing:s,contacts:[{email:t,firstName:e,lastNameOrSurname:i}]},password:o};if(a("fieldset input[type=checkbox]:checked").length>0?a("#businessType4").is(":checked")?""!==a("#cUSTTYPE").val()?r=1:(r=0,a("#cUSTTYPE").parent().append('<div class="other-business-desc" style="color:brown;font-weight:bold;">Please enter Business description.</div>'),a(document).scrollTop(a("#custEmailAddress").offset().top),setTimeout(function(){a(".other-business-desc").remove()},4e3),window.formMrk.submittable(!1)):r=1:(r=0,a(document).scrollTop(a("#businessType").offset().top),a("fieldset legend").append('<span class="checkbox-mandatory-message">&nbsp;&nbsp;&nbsp;Select atleast one option</span>'),setTimeout(function(){a(".checkbox-mandatory-message").remove()},3e3),window.formMrk.submittable(!1)),1===r&&require.mozuData("user").isAnonymous)n.action("customer","createStorefront",u).then(function(t){t&&(window.formMrk.submittable(!0),window.formMrk.submittable()&&(window.formMrk.submit(),window.formMrk.onSuccess(function(){return 0===a(".compare-full-error-container").length&&a(document.body).append("<div class='compare-full-error-container'><div class='compare-error-container'>Thank You.<br>Request Submitted Successfully.<button id='session-btn-rd' onclick='$(this).parent().parent().fadeOut(500);$(this).parent().parent().remove();window.location.reload();'>OK</button></div></div>"),!1})))},function(t){t&&"MISSING_OR_INVALID_PARAMETER"==t.errorCode&&"Missing or invalid parameter: EmailAddress EmailAddress already associated with a login"==t.message&&(a(".trigger-login").trigger("click"),a("#cboxOverlay").show().css("height",a(document).height()),a(document).scrollTop(0))});else if(1!==r||require.mozuData("user").isAnonymous||require.mozuData("user").email!==a("#custEmailAddress").val())1!=r||require.mozuData("user").isAnonymous||require.mozuData("user").email===a("#custEmailAddress").val()||0===a(".compare-full-error-container").length&&a(document.body).append("<div class='compare-full-error-container'><div class='compare-error-container'>Please provide registered email id, "+require.mozuData("user").email+"<br><button id='session-btn-rd' onclick='$(this).parent().parent().fadeOut(500);$(this).parent().parent().remove();'>OK</button></div></div>");else{var l;"US"!==a("select#custCountry").val()&&(a("select#custStateDup option").each(function(t,e){l=e.text===a("input#custState").val()?1:0}),0===l&&a("select#custStateDup").append(a("<option></option>").attr("value",a("input#custState").val()).text(a("input#custState").val())),a("select#custStateDup option:last").attr("selected","selected")),""!==a("input#State").val()&&"US"!==a("select#custCountry").val()&&(a("select#StateDup option").each(function(t,e){l=e.text===a("input#custState").val()?1:0}),0===l&&a("select#StateDup").append(a("<option></option>").attr("value",a("input#State").val()).text(a("input#State").val())),a("select#StateDup option:last").attr("selected","selected")),window.formMrk.submittable(!0),window.formMrk.submittable()&&(window.formMrk.submit(),window.formMrk.onSuccess(function(){return 0===a(".compare-full-error-container").length&&a(document.body).append("<div class='compare-full-error-container'><div class='compare-error-container'>Thank You.<br>Request Submitted Successfully.<br><button id='session-btn-rd' onclick='$(this).parent().parent().fadeOut(500);$(this).parent().parent().remove();window.location.reload();'>OK</button></div></div>"),!1}))}})})});