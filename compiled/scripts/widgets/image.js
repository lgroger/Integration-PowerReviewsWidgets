define(["modules/jquery-mozu","underscore","modules/api","modules/backbone-mozu","hyprlivecontext","shim!vendor/jquery-colorbox/jquery.colorbox[jquery=jQuery]>jQuery"],function(e,o,i,t,n){e("[data-mz-cms-image]").each(function(o,i){i=e(i);var t=i.data("mzCmsImage"),a="#";if(t&&"lightbox"===t.imageClickAction){var l=n.locals.siteContext.generalSettings.cdnCacheBustKey||"";a="file"===t.imageSource?"/cms/files/"+t.imageFileId+"?_mzCb="+l:t.imageExternalUrl,i.on("click",function(o){o.preventDefault(),require.mozuData("pagecontext").isEditMode||e.colorbox({photo:!0,href:a,maxHeight:e(window).height()-200,maxWidth:e(window).width()-200,scrolling:!1,opacity:"0.7",scalePhotos:!0,transition:"none",onComplete:function(){e("#cboxClose").html('<span style="display: inline-block">X</span>')}})})}})});