require(["modules/jquery-mozu","hyprlive","modules/backbone-mozu","modules/api","modules/models-product","modules/soft-cart"],function(t,o,a,e,r,i){function d(t,o){for(var a=require.mozuData(t),e=0;e<a.items.length;e++)if(a.items[e].productCode==o)return new r.Product(a.items[e])}t(document).ready(function(){console.log("Show a loader on the shoppable image."),console.log("shoppable-image-container js triggered.");var o,a=270,e=231,r=40,p=40,s={"+":function(t,o){return Math.abs(t+o)},"-":function(t,o){return Math.abs(t-o)}};t('[data-action="close_hotspot_popup"]').on("click",function(o){var a=t(o.currentTarget).attr("data-id"),e=t(o.currentTarget).attr("pcode"),r=t('.shopable_image_hotspot_popup[hotspot-data-id="'+a+'"][pcode="'+e+'"]')[0];r.style.display="none",t('[action="add-to-cart"][pcode="'+e+'"][data-id="'+a+'"]').removeClass("active")}),t('span[action="show-modal-popup"]').on("click",function(n){var c=t(n.currentTarget).attr("data-id"),l=t(n.currentTarget).attr("pcode");if(t(".shopable_image_hotspot_popup").each(function(){this.style.display="none";var o=t(this).attr("pcode"),a=t(this).attr("hotspot-data-id");t('[action="add-to-cart"][pcode="'+o+'"][data-id="'+a+'"]').removeClass("active")}),t(n.target).addClass("active"),l){var u=t('.shopable_image_hotspot_popup[hotspot-data-id="'+c+'"][pcode="'+l+'"]')[0],h=t('.shoppable-image-container[data-id="'+c+'"]').width(),m=t('.shoppable-image-container[data-id="'+c+'"]').height(),g=parseFloat(n.currentTarget.style.left.split("%")[0]),f=parseFloat(n.currentTarget.style.top.split("%")[0]),y=a/h*100,b=e/m*100,v=r/h*100,_=p/m*100,T=50>g?"+":"-",C=50>f?"+":"-",k=s[T](g,"+"==T?v:y+v),w=s[C](f,"+"==C?_:b+_);u.style.left=k+"%",u.style.top=w+"%",u.style.display="block",o=d(c,l),console.log(o),o.on("addedtocart",function(t){t&&t.prop("id")&&i.addToCount(1)})}})})});