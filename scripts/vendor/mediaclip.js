/**
https://api.mediacliphub.com/scripts/hub.min.js
**/
if(function(a,b){function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})}function d(){this.key=!1,this.sendConsoleErrors=!1,this.tag="jslogger",this.useDomainProxy=!1}function e(a,b){a.key=b,a.setSession(),i(a)}function f(a,b){a.tag=b}function g(a,b){a.useDomainProxy=b,i(a)}function h(b,c){if(b.sendConsoleErrors=c,!0===b.sendConsoleErrors){var d=a.onerror;a.onerror=function(c,e,f,g){b.push({category:"BrowserJsException",exception:{message:c,url:e,lineno:f,colno:g}}),d&&"function"==typeof d&&d.apply(a,arguments)}}}function i(b){1==b.useDomainProxy?b.inputUrl=j+a.location.host+"/"+LOGGLY_PROXY_DOMAIN+"/inputs/"+b.key+"/tag/"+b.tag:b.inputUrl=j+(b.logglyCollectorDomain||k)+"/inputs/"+b.key+"/tag/"+b.tag}var j="http"+("https:"===b.location.protocol?"s":"")+"://",k="logs-01.loggly.com",l="logglytrackingsession",m=l.length+1;LOGGLY_PROXY_DOMAIN="loggly",d.prototype={setSession:function(a){a?(this.session_id=a,this.setCookie(this.session_id)):this.session_id||(this.session_id=this.readCookie(),this.session_id||(this.session_id=c(),this.setCookie(this.session_id)))},push:function(a){var b=typeof a;if(a&&("object"===b||"string"===b)){var c=this;if("string"===b)a={text:a};else{if(a.logglyCollectorDomain)return void(c.logglyCollectorDomain=a.logglyCollectorDomain);if(void 0!==a.sendConsoleErrors&&h(c,a.sendConsoleErrors),a.tag&&f(c,a.tag),a.useDomainProxy&&g(c,a.useDomainProxy),a.logglyKey)return void e(c,a.logglyKey);if(a.session_id)return void c.setSession(a.session_id)}c.key&&c.track(a)}},track:function(b){b.sessionId=this.session_id;try{var c=new XMLHttpRequest;c.open("POST",this.inputUrl,!0),c.send(JSON.stringify(b))}catch(c){a&&a.console&&"function"==typeof a.console.log&&(console.log("Failed to log to loggly because of this exception:\n"+c),console.log("Failed log data:",b))}},readCookie:function(){var a=b.cookie,c=a.indexOf(l);if(0>c)return!1;var d=a.indexOf(";",c+1);return d=0>d?a.length:d,a.slice(c+m,d)},setCookie:function(a){b.cookie=l+"="+a}};var n=a._LTracker,o=new d;if(n&&n.length){var p=0,q=n.length;for(p=0;q>p;p++)o.push(n[p])}a._LTracker=o,a.LogglyTracker=d}(window,document),function(a,b){"use strict";function c(a){e?d.logglyTracker.push(a):console.log("Logging disabled",a)}var d={},e=!0,f={logglyKey:"3b6cf35b-faba-435b-8991-e3a7c6ac5f9b",sendConsoleErrors:!1,tag:"Prod,Launcher"};d.logglyTracker=new LogglyTracker,d.logglyTracker.push(f),d.log=function(a,d,e){c(b.extend({utcdate:new Date,level:e||"ERROR",message:a},d))},d.logError=function(a,d,e){c(b.extend({utcdate:new Date,level:e||"ERROR",message:a.message,error:a},d))},a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.logger=d}(window,window.jQuery),function(a){"use strict";var b=function(c){function d(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}var e;b.ignoredOrigins=[],this.init=function(a){e=a||{},e.targetOrigins=e.targetOrigins||[],e.targetOrigins=Array.isArray(e.targetOrigins)?e.targetOrigins:[e.targetOrigins]},this.init(c),this.post=function(a,b){if(b){if(0!==e.targetOrigins.length&&!d(e.targetOrigins,b))throw new Error('Domain "'+b+'" is not in the list of accepted domains')}else b=e.targetOrigins[0]||"*";var c=this.getTarget();"object"==typeof a&&(a=JSON.parse(JSON.stringify(a))),c.postMessage(a,b)},this.listen=function(b){a.addEventListener("message",this.wrapListenHandler(b),!1)},this.getTarget=function(){return e.targetId?document.getElementById(e.targetId).contentWindow:a.parent},this.wrapListenHandler=function(a){return function(c){if(e.targetOrigins.length>0&&!d(e.targetOrigins,c.origin))return void(console.log&&!d(b.ignoredOrigins,c.origin)&&(console.log("Message ignored from "+c.origin),b.ignoredOrigins.push(c.origin)));a(c)}}};a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.ProxyService=b}(window),function(a){"use strict";function b(a){var b=a.indexOf("-");return b>1?a.substring(0,b):a!==e?e:null}function c(a){function b(a,d){if(Object(a)!==a)c[d]=a;else if(Array.isArray(a)){for(var e=a.length,f=0;f<e;f++)b(a[f],d+"["+f+"]");0===e&&(c[d]=[])}else{var g=!0;for(var h in a)a.hasOwnProperty(h)&&(g=!1,b(a[h],d?d+"."+h:h));g&&d&&(c[d]={})}}var c={};return b(a,""),c}var d,e="en",f={};f.initializeLocales=function(a){d={};for(var b in a)a.hasOwnProperty(b)&&(d[b]=c(a[b]))},f.get=function(a,c){if(!d)throw"Locales are not initialized";for(var f=c||e;f;){var g;if(d[f]&&(g=d[f][a]),g)return g;f=b(f)}return a},a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.localizationService=f}(window),function(a){"use strict";var b={};b.getQuerystringParameter=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)"),d=c.exec(a.location.search);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))},b.buildQuerystring=function(a){if(void 0===a||"object"!=typeof a||!a)return"";var b="?",c=0;for(var d in a)if(a.hasOwnProperty(d)){c++;var e=d,f=a[d];1!==c&&(b+="&"),b+=e+"="+encodeURIComponent(f)}return 0===c?"":b},b.redirectTop=function(b){a.top.location=b},b.getOriginFromUrl=function(a){var b=/^(?:https?:\/\/[^:\/\n]+)/;return a.match(b)[0]};var c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";b.newGuid=function(){for(var a="",b=0;b<32;b++)a+=c.charAt(Math.floor(Math.random()*c.length));return a},a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.utils=b}(window),"undefined"==typeof jQuery)throw new Error("Mediaclip Hub's Javascript Launcher requires jQuery >= v1.5. Please see https://code.jquery.com/");!function(a,b){"use strict";function c(b){e(b,"storeUserToken"),b.hubUrl=b.hubUrl||"https://api.mediacliphub.com";var c=a.mediaclip.hub.utils.getQuerystringParameter("mediaclip-hub-flags");b.flags=f.mergeSettingAndQuerystringFlags(c,b.flags),a.mediaclip.hub.localizationService.initializeLocales(a.mediaclip.hub.locales)}function d(a,b){for(var c=0;c<a.length;++c){var d=b.indexOf(a[c]);-1!==d&&b.splice(d,1)}return a.concat(b)}function e(a,b){if(!a[b])throw new Error('Missing "'+b+'" in the "settings" argument',"")}a.mediaclip=a.mediaclip||{};var f=a.mediaclip.hub||{};f.init=function(a){try{f.initSettings=a||{},c(f.initSettings)}catch(a){console.error(a)}},f.unregister=function(){delete a.mediaclip.hub},f.launch=function(d){try{d=d||{},f.initSettings&&b.extend(d,f.initSettings),c(d),a.mediaclip.hub.launcher.start(d)}catch(b){a.mediaclip.hub.launcher.handleError(b)}},f.mergeSettingAndQuerystringFlags=function(a,b){return b?a?d(b.split(","),a.split(",")).join():b:a||""},f.redirect=function(b){a.mediaclip.hub.launcher.redirect(b)},f.updateStoreUserToken=function(b){a.mediaclip.hub.launcher.updateStoreUserToken(b)},f.getProjectThumbnailSrc=function(b){if(!f.initSettings)throw new Error("Call init() first");return a.mediaclip.hub.thumbnailService.getThumbnailSrc(f.initSettings,b)},a.mediaclip.hub=f}(window,jQuery),function(a,b){"use strict";function c(){n.killSwitchTriggered=!0,n.showErrorMessage(null,g("designerFailedToLaunchTime"),!0),n.handleError(new Error("Designer failed to load within alloted time."))}function d(){var a=b("#"+o);a.siblings().remove(),a.css("height","100%")}function e(){n.perf.readyToLoaded.timeStamp=h(),n.perf.readyToLoaded.timeFrame=k()}function f(a){location.reload(a)}function g(b){return a.mediaclip.hub.localizationService.get(b,n.settings.culture)}function h(){return(new Date).getTime()}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(){return n.perf.iframeInjectedToReady.timeStamp-n.perf.startToIframeInjected.timeStamp}function k(){return n.perf.readyToLoaded.timeStamp-n.perf.iframeInjectedToReady.timeStamp}function l(a,b,c,d){return{message:a,details:b,stack:c,logLevel:d}}function m(a,b){return"<h1>"+(a||g("somethingWentWrong"))+"</h1><p>"+(b||g("designerCouldNotLaunchTryAgain"))+"</p>"}var n={},o="designerFrame",p=new RegExp("^[A-Za-z0-9-_]+\\.([A-Za-z0-9-_]+)\\.[A-Za-z0-9-_]*$");n.settings=null,n.nextCallToKeepAlive=null,n.keepAlivePollingIntervalId=null,n.proxyService=null,n.activeFrameDomain=null,n.killSwitchTimer=null,n.integratorErrorCodes=["ExpiredStoreUserToken","UnauthorizedLaunch"],n.context={logger:"Mediaclip.Hub.Launcher",authorization:{hubUserId:null,storeId:null,jwt:null,runId:a.mediaclip.hub.utils.newGuid()},httpContext:{location:a.location.href,userAgent:a.navigator.userAgent},initializationSteps:[]},n.perf={startToIframeInjected:{},iframeInjectedToReady:{},readyToLoaded:{}},n.start=function(a){try{n.settings=a,n.perf.startToIframeInjected.timeStamp=h(),n.ensureSettingExists("projectId"),n.ensureSettingExists("storeUserToken"),n.context.authorization.jwt=n.settings.storeUserToken;var c=n.extractJwtInfo(n.settings.storeUserToken);n.settings.keepAliveIntervalMs=n.extractTimeToNextRenew(c,n.settings.keepAliveIntervalMs),n.context.authorization.storeId=n.settings.storeId=c.storeId,n.context.authorization.hubUserId=c.hubUserId,n.addWrapperCss(),n.killSwitchTimer=n.createKillSwitchTimer();var d=n.getLaunchSettingsUrl(),e={url:d,method:"GET",dataType:"json",headers:{Authorization:"HubStoreUserToken "+n.settings.storeUserToken}};b.ajax(e).done(function(a){if(!n.killSwitchTriggered){n.proxyService=n.createProxy(a.launchUrl,a.ecbUrl),n.proxyService.listen(n.onProxyMessage);var b=n.getContainer();n.createDesignerFrame(b,a.launchUrl),n.startKeepAliveTimer()}}).fail(function(a){n.showErrorMessage(g("designerFailedToLaunch"),g("designerCannotLaunchContent"),!0,a.responseJSON?a.responseJSON.message:void 0),n.handleError(l("LaunchSettings call failed",{request:e,response:a},void 0,n.isIntegrationError(a)?"WARN":void 0))})}catch(a){n.handleError(a)}},n.isIntegrationError=function(a){return!!(a&&a.responseJSON&&a.responseJSON.code)&&n.integratorErrorCodes.indexOf(a.responseJSON.code)>=0},n.updateStoreUserToken=function(a){n.postToFrame({action:"updateSessionId",token:a})},n.getLaunchSettingsUrl=function(){var b={projectId:n.settings.projectId,storeId:n.settings.storeId,runId:n.context.authorization.runId};return n.settings.flags&&(b.flags=n.settings.flags),n.settings.culture&&(b.culture=n.settings.culture),n.settings.mode&&(b.mode=n.settings.mode),n.settings.e2e&&(b.animations=!1),n.settings.hubUrl+"/launchsettings"+a.mediaclip.hub.utils.buildQuerystring(b)},n.createProxy=function(b,c){return new a.mediaclip.hub.ProxyService({targetId:o,targetDomain:[a.mediaclip.hub.utils.getOriginFromUrl(b),a.mediaclip.hub.utils.getOriginFromUrl(c)]})},n.getContainer=function(){var a=b(n.settings.container);if(0===a.length){var c='The container element specified in the launcher settings ("'+n.settings.container+'") does not exist in the DOM. Cannot launch the Designer.';n.showErrorMessage(null,c,!1);var d=new Error(c);throw d.logLevel="WARN",d}return a},n.createKillSwitchTimer=function(){return setTimeout(c,6e4)},n.addWrapperCss=function(){var a=document.getElementsByTagName("head")[0];if(!document.getElementById("mediaclip-required-css")){var b=document.createElement("style");b.setAttribute("id","mediaclip-required-css"),b.innerHTML="body,html{height:100%}html{-ms-content-zooming:none}body{margin:0;overflow:hidden;-ms-touch-action:none}.mediaclip-designer-wrapper{position:fixed;-webkit-overflow-scrolling:touch;right:0;bottom:0;left:0}iframe.mediaclip-designer{border:0;width:100%;height:100%}",a.appendChild(b)}},n.onProxyMessage=function(b){n.activeFrameDomain=b.origin,"ready"===b.data.action?(n.perf.iframeInjectedToReady.timeStamp=h(),n.perf.iframeInjectedToReady.timeFrame=j(),a.clearTimeout(n.killSwitchTimer),d(),a.setTimeout(function(){n.postToFrame({action:"readyComplete",startTime:n.perf.startToIframeInjected.timeStamp})},0)):"onSaveComplete"===b.data.action?n.settings.onSaveComplete&&n.settings.onSaveComplete():"onError"===b.data.action?(b.data.data&&b.data.data.silent||n.showErrorMessage(null,null,!0),n.handleError(l((b.data.data?b.data.data.message:null)||"(no message)",(b.data.data?b.data.data.details:null)||"(no details)",b.data.data&&b.data.data.details?b.data.data.details.stack:void 0))):"renewToken"===b.data.action?n.keepAlive():"reinitialize"===b.data.action?(document.getElementById(o).remove(),n.start(n.settings)):"trackInitializationStep"===b.data.action&&b.data.step&&n.context.initializationSteps.push(b.data.step)},n.createDesignerFrame=function(a,b){var c=document.createElement("IFRAME");c.id=o,c.name=o,c.src=b,c.setAttribute("class","mediaclip-designer"),c.style.height="0",c.onload=e,a.append(c),n.perf.startToIframeInjected.timeFrame=h()-n.perf.startToIframeInjected.timeStamp},n.startKeepAliveTimer=function(){n.nextCallToKeepAlive=h()+n.settings.keepAliveIntervalMs,n.keepAlivePollingIntervalId&&a.clearInterval(n.keepAlivePollingIntervalId),n.keepAlivePollingIntervalId=a.setInterval(n.keepAlivePolling,3e4)},n.ensureSettingExists=function(a){if(!n.settings[a]){var b='Missing "'+a+'" in the "settings" argument';n.showErrorMessage(null,b,!1);var c=new Error(b);throw c.logLevel="WARN",c}},n.extractJwtInfo=function(b){if(!b)return null;var c=b.match(p);if(!c){var d='Invalid Jwt: "'+b+'"';n.showErrorMessage(null,d,!1);var e=new Error(d);throw e.logLevel="WARN",e}return JSON.parse(a.atob(c[1]))},n.extractTimeToNextRenew=function(a,b){if(i(b))return b;if(a&&a.exp){return(1e3*a.exp-h())/2}var c="Could not extract time from undefined jwt.";n.showErrorMessage(null,c,!1);var d=new Error(c);throw d.logLevel="WARN",d},n.postToFrame=function(a){n.proxyService&&n.proxyService.post(a,n.activeFrameDomain)},n.keepAlivePolling=function(){h()>n.nextCallToKeepAlive&&n.keepAlive()},n.keepAlive=function(){var c={url:n.settings.keepAliveUrl,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({token:n.settings.storeUserToken})};b.ajax(c).done(function(a){if(a){if(a.redirectUrl||a.RedirectUrl)return void n.redirect(a.redirectUrl);var b=a.Token||a.token;if(!b){var d="Unexpected KeepAlive response received. Please stream the response as is, including response code.";n.showErrorMessage(null,d,!1),n.handleError(l(d,{request:c,response:a},null,"WARN"))}n.settings.storeUserToken=b;var e=n.extractJwtInfo(n.settings.storeUserToken);n.settings.keepAliveIntervalMs=n.extractTimeToNextRenew(e,n.settings.keepAliveIntervalMs),n.postToFrame({action:"updateSessionId",token:b})}n.startKeepAliveTimer()}).fail(function(b){a.clearInterval(n.keepAlivePollingIntervalId),n.postToFrame({action:"disableExitWarning"}),n.handleError(l("Keep alive call to the store failed",{request:c,response:b},void 0,"WARN")),f(!0)})},n.redirect=function(b){n.proxyService?n.postToFrame({action:"redirect",url:b}):a.location.href=b},n.handleError=function(b){a.clearTimeout(n.killSwitchTimer),a.mediaclip.hub.logger.logError({message:b.message,details:b.details,stack:b.stack},n.context,b.logLevel||"ERROR"),n.settings.onError&&n.settings.onError(b.message,b.stack)},n.showErrorMessage=function(a,c,d,e){var f=m(a,c),h=b(n.settings.container),i="<section class='mediaclip-technical-section'>"+g("technicalSection")+"</section>";i=e?i.replace("{technical}","<code>"+e+"</code>"):i.replace("{technical}","<code>(null)<code>"),i=i.replace("{code}","<code>"+n.context.authorization.runId+"</code>"),h.html("<style> \t\t\thtml { height: 100% } \t\t\t.mediaclip-error-section { background-color: #e8ebee; color: #111125; width: 100%; height: 100%; display: -webkit-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-direction: column; -ms-flex-direction: column; flex-direction: column; -webkit-align-items: center; -ms-flex-align: center; align-items: center; \t\t\t-webkit-justify-content: center; -ms-flex-pack: center; justify-content: center; text-align: center; } \t\t\t.mediaclip-error-section h1 { font-size: 24px; margin: 0; } \t\t\t.mediaclip-error-section h2 { font-size: 16px; margin: 0 0 15px 0; } \t\t\t.mediaclip-technical-section { text-align: left; margin-top: 5px; border: solid 1px #cdcdcd; border-radius: 6px; padding: 10px; margin-top: 30px } \t\t\t.mediaclip-technical-section code { color: #404040; background: none repeat scroll 0 0 #F8F8FF; border: 1px solid #DEDEDE; border-radius: 3px; padding: 0 0.2em; display: block; max-height: 7vh; overflow: auto; } \t\t\t.mediaclip-error-section p { font-size: 16px; line-height: 30px; padding: 20px; } \t\t\t.mediaclip-error-section a { font-size: 16px; color: #fff; text-decoration: none; padding: 16px 20px; background-color: #18A0DE; box-sizing: border-box; border-radius: 4px; min-width: 130px; display: block; text-transform: uppercase; } \t\t\t.mediaclip-error-section div { max-width: 600px; padding: 40px; background-color: #FEFEFF; border-radius: 6px; box-shadow: 0 2px 0 rgba(0,0,0,0.08); } \t\t\t#designerContainer { height: 100%} \t\t\t</style> \t\t\t<section class='mediaclip-error-section'> \t\t\t<div>"+f+(d?"<a href='javascript:window.location.href=window.location.href'>"+g("tryAgain")+"</a>":"")+(i||"")+"</div></section>")},a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.launcher=n}(window,jQuery),function(a){"use strict";var b={en:{tryAgain:"Try again",browserNotSupportedHeader:"Browser not supported",browserNotSupportedMessage:"Your browser is not supported, please update or switch to another browser.",designerFailedToLaunch:"Designer failed to launch.",designerFailedToLaunchTime:"Designer failed to load within alloted time. Please try launching it again.",somethingWentWrong:"Something went wrong :(",designerCannotLaunchContent:"The Designer could not launch the specified project. If this happens again, please contact the system administrator with details about your issue.",designerCouldNotLaunchTryAgain:"An unexpected error occurred.",technicalSection:"Code: {code}<br>Technical message: {technical}"},fr:{tryAgain:"RÃ©essayer",browserNotSupportedHeader:"Navigateur non pris en charge",browserNotSupportedMessage:"Votre navigateur n'est pas pris en charge, veuillez le mettre Ã  jour ou utiliser un autre navigateur.",designerFailedToLaunch:"L'Ã©diteur n'a pas pu dÃ©marrer.",designerFailedToLaunchTime:"L'Ã©diteur n'a pas pu dÃ©marrer dans le temps allouÃ©. SVP, essayez de le relancer.",somethingWentWrong:"Quelque chose n'a pas fonctionnÃ© :(",designerCannotLaunchContent:"L'Ã©diteur ne peut dÃ©marrer. Si ceci se produit encore, svp contactez l'administrateur du systÃ¨me avec les dÃ©tails de votre problÃ¨me",designerCouldNotLaunchTryAgain:"Une erreur inattendue s'est produite.",technicalSection:"Code: {code}<br>Message technique: {technical}"}};a.mediaclip=a.mediaclip||{},a.mediaclip.hub=a.mediaclip.hub||{},a.mediaclip.hub.locales=b}(window),function(a,b){"use strict";var c={};c.getThumbnailSrc=function(c,d){var e=function(a){return sessionStorage&&sessionStorage[a]?sessionStorage[a]:null},f=function(a,b){sessionStorage&&(sessionStorage[a]=b)},g=c.hubUrl,h=c.storeUserToken,i=d+"-thumbnail-imgData",j=d+"-thumbnail-etag",k={encodeToBase64:!0};if(c.flags&&(k.flags=c.flags),c.storeId&&(k.storeId=c.storeId),!d)throw new Error('Failed to get thumbnail with null "projectId".');var l=g+"/projects/"+d+"/storage/thumb.png"+a.mediaclip.hub.utils.buildQuerystring(k),m=b.Deferred(),n={Authorization:"HubStoreUserToken "+h},o=e(j),p=e(i);return o&&p&&(n["If-None-Match"]=o),b.ajax({url:l,method:"GET",headers:n}).then(function(a,b,c){return 304===c.status?m.resolve("data:image/png;base64,"+p):204===c.status?m.resolve(null):(f(i,a),f(j,c.getResponseHeader("etag")),m.resolve("data:image/png;base64,"+a))}).fail(function(a,b,c){m.reject(a,b,c)}),m.promise()},a.mediaclip.hub.thumbnailService=c}(window,jQuery);
